<!DOCTYPE HTML>

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>BitCoin Wallet Creator</title>

	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/big-integer.js"></script>
	
	<script type="text/javascript" src="js/bitcoin-js/crypto-js/crypto.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/crypto-js/sha256.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/crypto-js/ripemd160.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/prng4.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/rng.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/jsbn.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/jsbn2.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/jsbn/ec.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/sec.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/events/eventemitter.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/bitcoin.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/util.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/base58.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/address.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/ecdsa.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/eckey.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/opcode.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/script.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/transaction.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/wallet.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/txdb.js"></script>
	
	
	<script type="text/javascript" src="js/jquery-qrcode/jquery.qrcode.js"></script>
	<script type="text/javascript" src="js/jquery-qrcode/qrcode.js"></script>
	
	<script type="text/javascript" src="crypto-papers.js"></script>

	<link rel="stylesheet" href="style.css" />

	<style></style>

	<script>
	
	</script>
</head>
<body>
<script type="text/javascript">

var Default_Compress = undefined;

$().ready(function () 
	{		
	$("#private-key-submit").click(function() 
		{
		$('#coin-address-verify').val('');
		
		var CoinType = $('input[name=key-type]:checked').val();
		
		Log("Coin Type: " + CoinType);
		
		if (Default_Compress == undefined)
			{
			Default_Compress = GetDefaultCompress(CoinType);
			}
		
		var Compressed = Default_Compress;
		
		var PrivKey = $("#private-key-input").val();
		
		var PrivKeyHex = '';
		var PrivKeyWIF = '';
		
		if (PrivKey.length == 64)
			{
			PrivKeyHex = PrivKey;
			PrivKeyWIF = PrivateKeyHexToWIF(CoinType, PrivKeyHex, Default_Compress);
			}
		else if (PrivKey.length == 51 || PrivKey.length == 52)
			{
			PrivKeyWIF = PrivKey;
			Compressed = GetPrivateKeyCompressed(CoinType, PrivKeyWIF);
			PrivKeyHex = PrivateKeyWIFToHex(PrivKeyWIF);
			
			if (Compressed && !Default_Compress)
				PrivKeyWIF = PrivateKeyHexToWIF(CoinType, PrivKeyHex, false);
			if (!Compressed && Default_Compress)
				PrivKeyWIF = PrivateKeyHexToWIF(CoinType, PrivKeyHex, true);
				
			Compressed = Default_Compress;
			}
		else
			{
			Log("Unknown format: Size " + PrivKey.length);
			return;
			}
		
		$('.key-details').show();
		
		$('#private-key-hex').val(PrivKeyHex);
		$('#private-key-wif').val(PrivKeyWIF);
		$('#private-key-compressed').val(Compressed ? 'Yes' : 'No');
		
		Log("Private Key Hex: " + PrivKeyHex);
		Log("Private Key WIF: " + PrivKeyWIF);
		Log("Compressed: " + Compressed);
		
		var PubKeyHex = GetPublicKey(PrivKeyHex, Compressed);
		
		var Address = GetAddress(CoinType, PubKeyHex);
		
		$('#public-key-hex').val(PubKeyHex);
		$('#public-address').val(Address);
		
		Log("Public Address: " + Address);
		
		$('.coin-wallet-address').html(Address);
		$('.coin-wallet-address-qr').qrcode(Address);
		
		var split = Math.round(PrivKeyWIF.length/2);
		
		var PrivKeyWIF_Part1 = PrivKeyWIF.substr(0, split);
		var PrivKeyWIF_Part2 = PrivKeyWIF.substr(split);
		
		
		var Backup = ($('input[name=wallet-backup]:checked').val() == "Yes");
				
		if (Backup)
			{
			$('.coin-wallet-2').css('display', 'block');
			}
		else
			{
			$('.coin-wallet-2').css('display', 'none');
			}
			
		if (CoinType == 'btc')
			{
			// Verify
			var VerifyAddressECKey = new Bitcoin.ECKey(Crypto.util.hexToBytes(PrivKeyHex));
			VerifyAddressECKey.compressed = Compressed;
			var VerifyAddress = VerifyAddressECKey.getBitcoinAddress().toString();
			var Verified = (PrivKeyHex != '') && (Address == VerifyAddress);
			
			$('#coin-address-verify').val(Verified ? 'Yes' : 'No');
			}	
			
		$('.coin-wallets').removeClass('btc').removeClass('ltc').removeClass('nmc').removeClass('ppc').removeClass('nxt');
		$('.coin-wallets').addClass(CoinType);

		$('.coin-wallet-address').html(Address);
		
		$('.coin-wallet-address-qr').html('');
		$('.coin-wallet-address-qr').qrcode(Address);
		
		$('.coin-wallet-private-key.top').html(PrivKeyWIF_Part1);
		$('.coin-wallet-private-key.bottom').html(PrivKeyWIF_Part2);
		
		$('.coin-wallet-private-key-qr').html('');
		$('.coin-wallet-private-key-qr').qrcode(PrivKeyWIF);
		});
		
	$('#toggle-back-front').click(function() 
		{
		$('.coin-wallets').toggleClass('back');
		});
		
	$('#print-button').click(function() 
		{
		window.print();
		});
		
	$('#compress-decompress-button').click(function() 
		{
		Default_Compress = !Default_Compress;
		$("#private-key-submit").click();
		});
		
		
	$('.menu li').click(function() 
		{
		if ($(this).hasClass('disabled'))
			return;
			
		$('.menu li.active').removeClass('active');
		$(this).addClass('active');
		
		var section = $(this).attr('section');
		
		$('.wrapper .inner > .section').hide();
		$('.wrapper .inner > .section.' + section).show();
		});
	
	var SampleKey = 'KzeoBK2VnJYHYWqpG9sKEXnxLupouDb97RSAQeazYVWjd2tPKv1A';
	$('#private-key-input').val(SampleKey);
	
	$('.menu li')[2].click();
//	$('#private-key-submit').click();
	});
</script>

<div id="header" class="wrapper">
	<div class="inner">
		<a href="" title="" /><img id="logo" src="images/logo.png"/></a>
	</div>
</div>

<div class="menu">
	<ul>
		<li section="about-crypto-papers" class="menu-key-import disabled">About</li>
		<li section="security" class="menu-key-security disabled">Security</li>
		<li section="coin-setup" class="active menu-key-import">Key Import</li>
		<li section="coin-generation" class="inactive disabled">Key Generation</li>
		<li section="coin-wallets" class="inactive menu-key-print">Print</li>		
	</ul>
</div>

<form id="form1">
<div class="wrapper">
	<div class="inner">
		<div class="section about-crypto-papers"></div>
		<div class="section security"></div>
		<div class="section coin-setup">
			<div class="key-import">
				<div class="coin-type">
					<label class="left-label">Coin:</label>
					
					<span class="coin-type-radio">
						<input type="radio" name="key-type" value="btc" id="coin-btc"  checked /> 
						<label for="coin-btc">Bitcoin</label>
					</span>
					
					<span class="coin-type-radio">
						<input type="radio" name="key-type" value="ltc" id="coin-ltc" />
						<label for="coin-ltc">Litecoin</label>
					</span>
					
					<span class="coin-type-radio">
						<input type="radio" name="key-type" value="nmc" id="coin-nmc" /> 
						<label for="coin-nmc">Namecoin</label>
					</span>
					
					<span class="coin-type-radio">
						<input type="radio" name="key-type" value="ppc" id="coin-ppc" disabled /> 
						<label for="coin-ppc">PeerCoin</label>
					</span>
					
					<span class="coin-type-radio">
						<input type="radio" name="key-type" value="nxt" id="coin-nxt" disabled /> 
						<label for="coin-nxt">NXT</label>
					</span>
				</div>
				
				<div class="private-key"> 
					<label class="left-label">Input Private Key:</label>
					<input type="text" id="private-key-input" />
				</div>
				
				
				<div class="backup">
					<label class="left-label">Backup:</label>
					
					<span class="wallet-backup-radio">
						<input type="radio" name="wallet-backup" value="Yes" id="wallet-backup-yes" checked />
						<label for="wallet-backup-yes">Yes</label> 
					</span>
					
					<span class="wallet-backup-radio">
						<input type="radio" name="wallet-backup" value="No" id="wallet-backup-no" />
						<label for="wallet-backup-no">No</label> 
					</span>
				</div>
				
				<input type="button" id="private-key-submit" class="button" value="Create" />
			
			</div>			
			
			<div class="key-details"> 
				<label class="left-label">Private Key Hex:</label><input type="text" id="private-key-hex" readonly />
				<br />
				<label class="left-label">Compressed:</label><input type="text" id="private-key-compressed" readonly />
				<input type="button" id="compress-decompress-button" class="button" value="Compress / Decompress" />
				<br />
				<label class="left-label">Private Key Wallet Import Format (WIF):</label><input type="text" id="private-key-wif" readonly />
				<br />
				<label class="left-label">Private Key CheckSum:</label><input type="text" id="private-key-checksum" readonly />
				<br />
				<label class="left-label">Public Key Hex:</label><input type="text" id="public-key-hex" readonly />
				<br />			
				<label class="left-label">Public Key Hash160:</label><input type="text" id="public-key-hash160" readonly />
				<br />
				<label class="left-label">Address CheckSum:</label><input type="text" id="public-key-address-checksum" readonly />
				<br />		
				<label class="left-label">Public Address:</label><input type="text" id="public-address" readonly />
				<br />
				<label class="left-label">Verified:</label><input type="text" id="coin-address-verify" readonly />
				
			</div>			
		</div>
		<div class="section coin-generation"></div>
		<div class="section btc coin-wallets">
			
			<div class="print-buttons">
				<input type="button" id="print-button" class="button" value="Print" />
				
				<input type="button" id="toggle-back-front" class="button" value="Back / Front" />
			</div>
			
			<div class="coin-wallet coin-wallet-1">
				<div class="coin-wallet-left">
					<div class="coin-wallet-address top">&nbsp;</div>
					<div class="coin-wallet-address-qr"></div>
					<div class="coin-wallet-address bottom">&nbsp;</div>
				</div>
				<div class="coin-wallet-right">
					<div class="coin-wallet-private-key top">&nbsp;</div>
					<div class="coin-wallet-private-key-qr"></div>
					<div class="coin-wallet-private-key bottom">&nbsp;</div>
				</div>
			</div>
			<div class="coin-wallet coin-wallet-2">
				<div class="coin-wallet-left">
					<div class="coin-wallet-address top">&nbsp;</div>
					<div class="coin-wallet-address-qr"></div>
					<div class="coin-wallet-address bottom">&nbsp;</div>
				</div>
				<div class="coin-wallet-right">
					<div class="coin-wallet-private-key top">&nbsp;</div>
					<div class="coin-wallet-private-key-qr"></div>
					<div class="coin-wallet-private-key bottom">&nbsp;</div>
				</div>		
			</div>
		</div>
	</div>
</div>
</form>
</body>
</html>