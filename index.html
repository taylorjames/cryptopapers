<!DOCTYPE HTML>

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<title>CryptoPapers - Wallet Creator</title>

	<script type="text/javascript" src="js/jquery.js"></script>
	
	<script type="text/javascript" src="js/jquery-animate-auto.js"></script>
	
	<script type="text/javascript" src="js/big-integer.js"></script>
	
	<script type="text/javascript" src="js/bitcoin-js/crypto-js/crypto.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/crypto-js/sha256.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/crypto-js/ripemd160.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/prng4.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/rng.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/jsbn.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/jsbn2.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/jsbn/ec.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/jsbn/sec.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/events/eventemitter.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/bitcoin.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/util.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/base58.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/address.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/ecdsa.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/eckey.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/opcode.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/script.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/transaction.js"></script>

	<script type="text/javascript" src="js/bitcoin-js/wallet.js"></script>
	<script type="text/javascript" src="js/bitcoin-js/txdb.js"></script>
	
	
	<script type="text/javascript" src="js/jquery-qrcode/jquery.qrcode.js"></script>
	<script type="text/javascript" src="js/jquery-qrcode/qrcode.js"></script>
	
	<script type="text/javascript" src="js/prng4.js"></script>
	
	<script type="text/javascript" src="crypto-papers.js"></script>

	
	<link rel="stylesheet" href="css/normalize.css" />
	<link rel="stylesheet" href="css/foundation.css" />
	<link rel="stylesheet" href="css/toggle-switch.css" />
	<link rel="stylesheet" href="css/style.css" />
	

	<style></style>

	<script>
	
	</script>
</head>
<body>
<script type="text/javascript">

var Default_Compress = undefined;
var AutoGenerateWhenEntropyPoolFills = true;
var HasPrivateKey = false;

$().ready(function () 
	{	
	$('body').mousemove(function(ev) {
		sr.mouse_move(ev);
		
		$('#random-pool').val(Crypto.util.bytesToHex(sr.pool));
		
		var collected_points = sr.pointsCaptured;
		var total_points = sr.pointsRequired;
		
		var percent = Math.round(collected_points / total_points * 100);
		
		$('.rng-status .rng-status-text').html(percent + '% ' + '(' + collected_points + ' / ' + total_points + ')');
		
		if (percent > 100)
			percent = 100;
			
		$('.pool-status-bar .pool-status-complete').attr('style', 'width:' + percent + '%');
		
		if (collected_points == total_points && !HasPrivateKey)
			{
			$('.generate-button').removeAttr('disabled').addClass('enabled');
			$('ul#coin-setup-menu li#print.step').removeClass('disabled');

			if (AutoGenerateWhenEntropyPoolFills)
				{
				$('#private-key-generate').click();
				}
			}
	});
	
	$("#private-key-submit").click(function() 
		{		
		$('#coin-address-verify').val('');
		
		var CoinType = $('div.coin.active').attr('data');
		
		Log("Coin Type: " + CoinType);
		
		if (Default_Compress == undefined)
			{
			Default_Compress = GetDefaultCompress(CoinType);
			}
		
		var Compressed = Default_Compress;
		
		var PrivKey = $("#private-key-input").val();
		
		var PrivKeyHex = '';
		var PrivKeyWIF = '';
		
		if (PrivKey.length == 64)
			{
			PrivKeyHex = PrivKey;
			PrivKeyWIF = PrivateKeyHexToWIF(CoinType, PrivKeyHex, Default_Compress);
			}
		else if (PrivKey.length == 51 || PrivKey.length == 52)
			{
			PrivKeyWIF = PrivKey;
			Compressed = GetPrivateKeyCompressed(CoinType, PrivKeyWIF);
			PrivKeyHex = PrivateKeyWIFToHex(PrivKeyWIF);
			
			if (Compressed && !Default_Compress)
				PrivKeyWIF = PrivateKeyHexToWIF(CoinType, PrivKeyHex, false);
			if (!Compressed && Default_Compress)
				PrivKeyWIF = PrivateKeyHexToWIF(CoinType, PrivKeyHex, true);
				
			Compressed = Default_Compress;
			}
		else
			{
			Log("Unknown format: Size " + PrivKey.length);
			return;
			}
			
		HasPrivateKey = true;
		
		$('.key-details').fadeIn();
		
		$('#private-key-hex').val(PrivKeyHex);
		$('#private-key-wif').val(PrivKeyWIF);
		$('#private-key-compressed').val(Compressed ? 'Yes' : 'No');
		
		Log("Private Key Hex: " + PrivKeyHex);
		Log("Private Key WIF: " + PrivKeyWIF);
		Log("Compressed: " + Compressed);
		
		var PubKeyHex = GetPublicKey(PrivKeyHex, Compressed);
		
		var Address = GetAddress(CoinType, PubKeyHex);
		
		$('#public-key-hex').val(PubKeyHex);
		$('#public-address').val(Address);
		
		Log("Public Address: " + Address);
		
		$('.coin-wallet-address').html(Address);
		$('.coin-wallet-address-qr').qrcode(Address);
		
		var split = Math.round(PrivKeyWIF.length/2);
		
		var PrivKeyWIF_Part1 = PrivKeyWIF.substr(0, split);
		var PrivKeyWIF_Part2 = PrivKeyWIF.substr(split);
		
		
		var Backup = ($('input[name=wallet-backup]:checked').val() == "Yes");
				
		if (Backup)
			{
			$('.coin-wallet-2').css('display', 'block');
			}
		else
			{
			$('.coin-wallet-2').css('display', 'none');
			}
			
		if (CoinType == 'btc')
			{
			// Verify
			var VerifyAddressECKey = new Bitcoin.ECKey(Crypto.util.hexToBytes(PrivKeyHex));
			VerifyAddressECKey.compressed = Compressed;
			var VerifyAddress = VerifyAddressECKey.getBitcoinAddress().toString();
			var Verified = (PrivKeyHex != '') && (Address == VerifyAddress);
			
			$('#coin-address-verify').val(Verified ? 'Yes' : 'No');
			}	
			
		$('.coin-wallets').removeClass('btc').removeClass('ltc').removeClass('nmc').removeClass('ppc').removeClass('nxt');
		$('.coin-wallets').addClass(CoinType);

		$('.coin-wallet-address').html(Address);
		
		$('.coin-wallet-address-qr').html('');
		$('.coin-wallet-address-qr').qrcode(Address);
		
		$('.coin-wallet-private-key.top').html(PrivKeyWIF_Part1);
		$('.coin-wallet-private-key.bottom').html(PrivKeyWIF_Part2);
		
		$('.coin-wallet-private-key-qr').html('');
		$('.coin-wallet-private-key-qr').qrcode(PrivKeyWIF);
		});
		
	$('input[name=print-face]').change(function() 
		{
		$('.coin-wallet').hide();
		$('.coin-wallets').toggleClass('back');
		$('.coin-wallet').fadeIn();
		});
		
	$('#print-button').click(function() 
		{
		window.print();
		});
		
	$('input[name=compression]').change(function() 
		{
		Default_Compress = !Default_Compress;

		$("#private-key-submit").click();
		});
	
	$('input[name=wallet-backup]').change(function()
		{
		var Backup = ($('input[name=wallet-backup]:checked').val() == "Yes");
				
		if (Backup)
			{
			$('.coin-wallet-2').fadeIn();
			}
		else
			{
			$('.coin-wallet-2').fadeOut();
			}

		});
		
	$('input[name=wallet-zoom]').change(function()
		{
		var Zoom = $('input[name=wallet-zoom]:checked').val();
		
		$('.coin-wallet').animate({zoom: Zoom + '%'}, 300);
		
		setTimeout(301, function() {
			$('.coin-wallet').css('zoom', '');
			$('.coin-wallet').removeClass('zoom-90').removeClass('zoom-95').removeClass('zoom-100').removeClass('zoom-105').removeClass('zoom-110');		
			$('.coin-wallet').addClass('zoom-' + Zoom);
		});
		
		});

		
	$('#coin-setup-menu.menu li').click(function() 
		{
		if ($(this).hasClass('disabled') || $(this).hasClass('active'))
			return;
		
		var section = $(this).attr('section');

		$('#coin-setup-menu.menu li.active').removeClass('active');

		$('.coin-setup .sub-section').each(function() {
			$(this).fadeOut();
		});
		
		$(this).addClass('active');		
		
		$('.coin-setup .sub-section.' + section).fadeIn();		
		});
		
	$('#main-menu.menu li').click(function() 
		{
		if ($(this).hasClass('disabled') || $(this).hasClass('active'))
			return;
		
		var section = $(this).attr('section');

		if (section != 'coin-wallets')
			{
			$('.menu li.active').removeClass('active');
			}

		$(this).addClass('active');
		
		$('.wrapper .inner > .section').each(function() {
			$(this).fadeOut();
		});
		
		setTimeout(function() {
			$('.wrapper .inner > .section.' + section).fadeIn();
		}, 400);
		
		});
		
	$('.coin-type input[type=radio]').change(function() {
		$('#private-key-submit').click();
		
	});
	
	$('.generate-button').click(function() {
        
		var bytes = sr.getBytes(32);
		//var bytes = Crypto.util.randomBytes(32);
        
		
		$('#private-key-input').val(Crypto.util.bytesToHex(bytes));
		
		$('#private-key-submit').click();
		
	});
	
	// Show the active page, hide the others
	var section = $('.menu li.active').attr('section');
	var subsection = $('#coin-setup-menu li.active').attr('section');
	$('.wrapper .inner > .section').hide();
	$('.wrapper .inner > .section.' + section).show();
	Log(subsection);
	$('.sub-section').hide();
	Log(subsection);
	$('.sub-section.' + subsection).show();
	Log(subsection);
			
//	$('#private-key-submit').click();
	});
	

	

</script>

<div id="header" class="wrapper">
	<div class="inner">
		<a href="" title="" /><img id="logo" src="images/logo.png"/></a>
	</div>
</div>

<div id="main-menu" class="menu">
	<ul>
		<li section="about-crypto-papers" class="menu-key-import disabled">About</li>
		<li section="security" class="menu-key-security disabled">Security</li>
		<li section="coin-setup" class="active menu-key-import active">Wallet Setup</li>
	</ul>
</div>

<form id="form1">


<div id="page" class="wrapper">
	<div class="inner">
		<div class="section about-crypto-papers"></div>
		<div class="section security"></div>
		<div class="section coin-setup">
			<ul id="coin-setup-menu" class="menu">
				<li id="generate" class="step active" section="coin-setup-keys">1. Generate Wallet Data</li>
				<li id="print" class="step disabled" section="coin-setup-print">2. Print Wallet</li>
			</ul>
			<div class="sub-section coin-setup-keys">
				<div class="key-import">
					<div class="coin-type new">
						<!--
						<div class="current-coin"><img src="" /><em></em></div>
						<a class="button choose-coin">Change Coin</a>
						<div class="clearfix"></div>
						-->
						<div class="choose-coin">Choose Coin:</div>
						<div class="coins-grid-wrapper box-padding">
							<div class="coin-grid-row">
								<div class="coin btc-coin active" data="btc"><em>Bitcoin</em></div>
								<div class="coin ltc-coin" data="ltc"><em>Litecoin</em></div>
								<div class="coin nxt-coin disabled" data="nxt"><span class="coming-soon">COMING SOON</span><em>NXT</em></div>
								<div class="coin nem-coin disabled" data="nem"><span class="coming-soon">COMING SOON</span><em>NEM</em></div>
								<div class="coin nmc-coin" data="nmc"><em>Namecoin</em></div>
							</div>
							<div class="coin-grid-row">
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
							</div>
							<div class="coin-grid-row">
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
							</div>
							<div class="coin-grid-row">
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
								<div class="coin ppc-coin" data="ppc"><em>Peercoin</em></div>
							</div>
						</div>
					</div>
					<div class="clearfix"></div>
					<!-- <div class="coin-type">
						<div class="switch-toggle switch-5 coins switch-candy">
							<input id="coin-btc" type="radio" name="key-type" value="btc"   checked /> 
							<label for="coin-btc">Bitcoin</label>

							<input type="radio" name="key-type" value="ltc" id="coin-ltc" />
							<label for="coin-ltc">Litecoin</label>

							<input type="radio" name="key-type" value="nmc" id="coin-nmc" /> 
							<label for="coin-nmc">Namecoin</label>

							<input type="radio" name="key-type" value="ppc" id="coin-ppc" /> 
							<label for="coin-ppc">PeerCoin</label>

							<input type="radio" name="key-type" value="nxt" id="coin-nxt" disabled /> 
							<label for="coin-nxt">NXT</label>

							<a></a>
						</div>
					</div> -->
					
					<div class="private-key"> 
						<div>
						<input type="text" id="private-key-input" />					
						<input type="button" id="private-key-generate" class="button generate-button" value="Generate" disabled />
						</div>
					</div>	
					
					<input type="button" id="private-key-submit" class="large-button" value="Create" />
				
				</div>			
				<div class="random-info">
					<div class="rng-status">
						<label>RNG Pool Status: 
							<span class="rng-status-text"></span>
						</label>
						<div class="pool-status-bar">
							<div class="pool-status-complete" style="width:0%"></div>
						</div>
					</div>
					
					<label>RNG Pool Data:</label>
					<textarea id="random-pool" readonly></textarea>
				</div>
				<div class="key-details"> 
					<span class="key-info-public-address">
					<label class="left-label">Public Address:</label><input type="text" id="public-address" readonly />
					</span>
					<br />
					<label class="left-label">Private Key Hex:</label><input type="text" id="private-key-hex" readonly />
					<br />
					<label class="left-label">Compression:</label>
					<div class="switch-toggle compression switch-2 switch-candy ">
						<input type="radio" name="compression" value="Yes" id="compressed" checked />
						<label for="compressed">Yes</label>

						<input type="radio" name="compression" value="No" id="decompressed" />
						<label for="decompressed">No</label> 

						<a></a>
					</div>
					<br />
					<label class="left-label">Private Key Wallet Import Format (WIF):</label><input type="text" id="private-key-wif" readonly />
					<br />
					<label class="left-label">Private Key CheckSum:</label><input type="text" id="private-key-checksum" readonly />
					<br />
					<label class="left-label">Public Key Hex:</label><input type="text" id="public-key-hex" readonly />
					<br />			
					<label class="left-label">Public Key Hash160:</label><input type="text" id="public-key-hash160" readonly />
					<br />
					<label class="left-label">Address CheckSum:</label><input type="text" id="public-key-address-checksum" readonly />
					<br />		
					<label class="left-label">Verified:</label><input type="text" id="coin-address-verify" readonly />
					
				</div>			
			</div>
				
			<div class="sub-section coin-setup-print">
				<div class="btc coin-wallets">
				
					<div id="print-settings">
						<div class="print-buttons">

							<label class="left-label">Print Face:</label>
								<div class="switch-toggle switch-2 switch-candy ">
									<input type="radio" name="print-face" value="Front" id="toggle-front" checked />
									<label for="toggle-front">Front</label>

									<input type="radio" name="print-face" value="Back" id="toggle-back" />
									<label for="toggle-back">Back</label> 

									<a></a>
							</div>

							<div class="backup">

								<label class="left-label">Copies:</label>
								<div class="switch-toggle switch-2 switch-candy ">
									<input type="radio" name="wallet-backup" value="No" id="wallet-backup-no" />
									<label for="wallet-backup-no">One</label> 
									
									<input type="radio" name="wallet-backup" value="Yes" id="wallet-backup-yes" checked />
									<label for="wallet-backup-yes">Two</label>
							
									<a></a>
								</div>
								
								<label class="left-label">Zoom:</label>
								<div class="switch-toggle switch-5 switch-candy ">
									
									<input type="radio" name="wallet-zoom" value="90" id="wallet-zoom-90" />
									<label for="wallet-zoom-90">0.90 X</label>
									
									<input type="radio" name="wallet-zoom" value="95" id="wallet-zoom-95" />
									<label for="wallet-zoom-95">0.95 X</label>
									
									<input type="radio" name="wallet-zoom" value="100" id="wallet-zoom-100" checked />
									<label for="wallet-zoom-100">1.00 X</label>
									
									<input type="radio" name="wallet-zoom" value="105" id="wallet-zoom-105" />
									<label for="wallet-zoom-105">1.05 X</label>
									
									<input type="radio" name="wallet-zoom" value="110" id="wallet-zoom-110" />
									<label for="wallet-zoom-110">1.10 X</label>
							
									<a></a>
								</div>
							</div>

							<input type="button" id="generate-new-wallet" class="button generate-button large-button" value="Generate New Wallet" disabled />

							<input type="button" id="print-button" class="large-button" value="Print" />
							<br />
						</div>
					</div>
					
					<div class="coin-wallet coin-wallet-1 zoom-100">
						<div class="coin-wallet-left">
							<div class="coin-wallet-address top">&nbsp;</div>
							<div class="coin-wallet-address-qr"></div>
							<div class="coin-wallet-address bottom">&nbsp;</div>
						</div>
						<div class="coin-wallet-right">
							<div class="coin-wallet-private-key top">&nbsp;</div>
							<div class="coin-wallet-private-key-qr"></div>
							<div class="coin-wallet-private-key bottom">&nbsp;</div>
						</div>
					</div>
					<div class="coin-wallet coin-wallet-2 zoom-100">
						<div class="coin-wallet-left">
							<div class="coin-wallet-address top">&nbsp;</div>
							<div class="coin-wallet-address-qr"></div>
							<div class="coin-wallet-address bottom">&nbsp;</div>
						</div>
						<div class="coin-wallet-right">
							<div class="coin-wallet-private-key top">&nbsp;</div>
							<div class="coin-wallet-private-key-qr"></div>
							<div class="coin-wallet-private-key bottom">&nbsp;</div>
						</div>		
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</form>
<div id="dark-box"></div>
<script type="text/javascript">

$(document).ready(function(){

	//change coin click
	$('.coins-grid-wrapper .coin:not(.disabled)').click(function(e)
		{
		if ($('.coins-grid-wrapper').hasClass('selecting'))
			{
			$('.coins-grid-wrapper .coin.active').removeClass('active');
			$('.coins-grid-wrapper .coin-grid-row.active').removeClass('active');
			
			$(this).parent().addClass('active');
			$(this).addClass('active');
			
			$('.coin-grid-row:not(.active)').animate({ height: '0px'}, 300);
			$('.coins-grid-wrapper .coin:not(.active)').animate({height: '0px', width: '0px'}, 300, function() 
				{
				$('.coins-grid-wrapper').removeClass('selecting');
				});
			
			$("#private-key-submit").click();
			/*
			$('.coins-grid-wrapper').animate({width: '120px', height: '140px'}, 300, function() 
				{
				$('.coins-grid-wrapper').removeClass('selecting');
				});
			*/
			}
		else
			{
			$('.coins-grid-wrapper').addClass('selecting');
			
			$('.coin-grid-row').animate({ height: '140px'}, 300);
			
			$('.coins-grid-wrapper .coin:not(.active)').css('width', '0px').css('height', '0px').animate({width: '120px', height: '140px'}, 300);
			//$('.coins-grid-wrapper').animateAuto('both', 300);
			}
		});	
	
/*
	e.preventDefault();
	$('#dark-box').fadeIn();
	$('.coins-grid-wrapper').fadeIn();
	
	//set start coin image
	function setCurrentCoin() {
		coinName = $('.coins-grid-wrapper .coin.active').attr('data');
		coinSrc = 'images/coin-icons/' + coinName + '-logo.png';
		$('div.current-coin img').attr('src', coinSrc);

		//set start coin label
		coinTxt = $('.coins-grid-wrapper .coin.active em').html();
		$('div.current-coin em').html(coinTxt);
	}
	
	//new coin click
	$('.coins-grid-wrapper .coin').click(function(){
		$('div.coin.active').removeClass('active');
		$(this).addClass('active');
		setCurrentCoin();
		$('.coins-grid-wrapper').fadeOut();
		$('#dark-box').fadeOut();
		$("#private-key-submit").click();
	})

	setCurrentCoin();
	*/
})

</script>
</body>
</html>